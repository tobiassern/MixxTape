jQuery(function($){function s(){if(!t){var s="";$("#searchResult").empty();var e=$("#songSearchInput").val();e.length>=3&&$.ajax({type:"GET",dataType:"json",url:"/search/song/JSON?s="+e,success:function(t){0==t.Songs.length?s="<p>No Result</p>":$(t.Songs).each(function(e){var a=t.Songs[e];s+='<p class="song-result" data-song-id="'+a.id+'">'+a.title+" - "+a.artist+" <span>+</span></p>"}),s+="<p><small class='text-muted'>Can't find the right song? <a href='/song/create'>Create one instead!</a></small></p>",$("#searchResult").append(s)}}),t=setTimeout(function(){t=!1},250)}}$(".go-next-icon").click(function(){var s=$(this).closest("section").next("section");$("html, body").animate({scrollTop:s.offset().top},500)}),$("body").on("submit","#searchSong",function(t){s(),t.preventDefault()}),$("#songSearchInput").on("input",function(){s()});var t=!1;$("body").on("click",".song-result",function(){var s=$(this).attr("data-song-id"),t=$("meta[name=playlist_id]").attr("content");$.ajax({type:"GET",dataType:"json",url:"/playlists/"+t+"/song/"+s+"/add",success:function(s){s.success?$(".message-alert-box").append('<div class="alert alert-info alert-dismissible fade in" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>Song added to playlist</div>'):($(".message-alert-box").append('<div class="alert alert-info alert-dismissible fade in" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>Song has already been added to playlist</div>'),console.log(s.error))}})}),$("body").on("click",".remove-song",function(){var s=confirm("Are you sure you want to remove this song?");playlistSongID=$(this).attr("data-ID"),s&&$.ajax({type:"GET",dataType:"json",url:"/playlistsongs/delete/"+playlistSongID,success:function(s){s.success?($(".single-song-list-"+playlistSongID).remove(),$(".message-alert-box").append('<div class="alert alert-info alert-dismissible fade in" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>Song removed from playlist</div>')):console.log(s.error)}})})});